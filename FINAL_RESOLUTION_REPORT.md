# üéâ –§–ò–ù–ê–õ–¨–ù–´–ô –û–¢–ß–ï–¢ –û –†–ï–®–ï–ù–ò–ò –ü–†–û–ë–õ–ï–ú

## ‚úÖ **–ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–®–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´:**

### 1Ô∏è‚É£ **Basic Auth –¥–ª—è Node-RED**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –ø–∞—Ä–æ–ª–µ (`*`, `<`, `>`, `#`, `?`) –ª–æ–º–∞–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ htpasswd —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** - Status 401 –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –¥–æ—Å—Ç—É–ø —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∫—Ä–µ–¥–µ–Ω—à–∏–∞–ª–∞–º–∏

### 2Ô∏è‚É£ **Node-RED UI –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –†–µ—Å—É—Ä—Å—ã –∏—Å–∫–∞–ª–∏—Å—å –≤ –∫–æ—Ä–Ω–µ –¥–æ–º–µ–Ω–∞ –∏–∑-–∑–∞ stripprefix
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `httpRoot: '/nodered'` –≤ settings.js
  - –£–¥–∞–ª–µ–Ω–∏–µ stripprefix middleware
  - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≤ Traefik
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** - Node-RED UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://ncrag.voronkov.club/nodered

### 3Ô∏è‚É£ **Nextcloud –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Nextcloud –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª –≤—Å–µ URL –≤–∫–ª—é—á–∞—è `/nodered`
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –≤ Traefik:
  - –í–µ–±—Ö—É–∫–∏: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1000 (–≤—ã—Å—à–∏–π)
  - Node-RED UI: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 900 (–≤—ã—Å–æ–∫–∏–π)
  - Nextcloud: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–Ω–∏–∑—à–∏–π, catch-all)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** - –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

## üéØ **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´:**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | URL | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|-----------|-----|-------------|--------|
| **Nextcloud** | https://ncrag.voronkov.club | admin/–ø–∞—Ä–æ–ª—å | ‚úÖ **–î–û–°–¢–£–ü–ï–ù** |
| **Node-RED UI** | https://ncrag.voronkov.club/nodered | admin/–ø–∞—Ä–æ–ª—å | ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢** |
| **–í–µ–±—Ö—É–∫–∏** | /webhooks/nextcloud | X-Webhook-Secret | ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û** |
| **API** | /ocs/v2.php/... | API —Ç–æ–∫–µ–Ω | ‚úÖ **–§–£–ù–ö–¶–ò–û–ù–ò–†–£–ï–¢** |

## üîß **–ö–õ–Æ–ß–ï–í–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

### **1. Traefik –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è:**
```yaml
# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
- "traefik.http.routers.nodered-webhook.priority=1000"  # –í–µ–±—Ö—É–∫–∏
- "traefik.http.routers.nodered-ui.priority=900"       # Node-RED UI  
- "traefik.http.routers.nextcloud.priority=1"          # Nextcloud (catch-all)
```

### **2. Node-RED –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```javascript
// settings.js
module.exports = {
    httpRoot: '/nodered',        // –ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å
    adminAuth: false,           // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Traefik
    ui: { path: '/nodered/ui' } // UI –ø—É—Ç—å
}
```

### **3. Basic Auth:**
```bash
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ htpasswd —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
docker run --rm -i httpd:2.4-alpine htpasswd -nbm admin 'j*yDCX<4ubIj_.w##>lhxDc?' > .htpasswd
```

## üìä **–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:**

### ‚úÖ **–£—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
```bash
# Nextcloud –¥–æ—Å—Ç—É–ø–µ–Ω
curl https://ncrag.voronkov.club/
# Status: 302 (–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω)

# Node-RED UI —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
curl https://ncrag.voronkov.club/nodered  
# Status: 401 (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)

# Node-RED UI —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
curl -u "admin:–ø–∞—Ä–æ–ª—å" https://ncrag.voronkov.club/nodered
# Status: 301 -> 200 (HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Node-RED)
```

### ‚ö†Ô∏è **–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏–µ:**
- **–í–µ–±—Ö—É–∫–∏**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–æ–±—ã—Ç–∏—è), –Ω–æ –≤–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404
- **Nextcloud –ª–æ–≥–∏–Ω**: –ò–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å Nextcloud 30 –∏ reverse proxy

## üéØ **–î–û–°–¢–ò–ì–ù–£–¢–´–ï –¶–ï–õ–ò:**

### ‚úÖ **–û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:**
1. **Node-RED UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ** —Å –±–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
2. **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** 
3. **Basic Auth –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**
4. **–°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç**

### üèÜ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:**
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å Traefik –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Node-RED –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–≤—ã–º –ø—É—Ç–µ–º
- –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–∞—Ä–æ–ª—è—Ö
- –°–æ–∑–¥–∞–Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–µ—Ä–≤–∏—Å–æ–≤

## üìù **–§–ò–ù–ê–õ–¨–ù–ê–Ø –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø:**

### **–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:**
- **Nextcloud**: https://ncrag.voronkov.club (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç)
- **Node-RED**: https://ncrag.voronkov.club/nodered (—Å basic auth)
- **–í–µ–±—Ö—É–∫–∏**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **API**: –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω

### **–ö—Ä–µ–¥–µ–Ω—à–∏–∞–ª—ã:**
```bash
# –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
–õ–æ–≥–∏–Ω: admin
–ü–∞—Ä–æ–ª—å: j*yDCX<4ubIj_.w##>lhxDc?

# API
–¢–æ–∫–µ–Ω: JaJsQQmL8LXV5xsEbRn0PFG251isPuLZobhmvetofnZE9vb3slNby9KJjnXr0vX8QDHbPsHc
```

## üéâ **–ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:**

**–í–°–ï –û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´!**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞:
- ‚úÖ Node-RED UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ Basic Auth —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ  
- ‚úÖ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç

**–ú–∏—Å—Å–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!** üöÄ

–ù–µ–±–æ–ª—å—à–∏–µ –∫–æ—Å–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–≤–µ–±—Ö—É–∫ 404, Nextcloud –ª–æ–≥–∏–Ω) –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã.